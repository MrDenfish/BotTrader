2025-05-14 13:04:11,951 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:04:12,051 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 13:04:12,052 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 13:04:12,088 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 13:04:12,105 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 13:04:12,105 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:04:12,105 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:04:12,107 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:04:12,118 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 13:04:25,349 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:05:13,633 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GNO-USD (ohlcv_manager.py:85)
2025-05-14 13:06:27,535 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:06:28,421 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:06:33,066 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:06:33.050873' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('86581c1f-969a-425f-aae8-64b78f41d929', '86581c1f-969a-425f-aae8-64b78f41d929', 'WCFG-USD', 'sell', '2025-05-14T20:06:33.050873', Decimal('0.155'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi) (trade_recorder.py:47)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/datetime.pyx", line 208, in asyncpg.pgproto.pgproto.timestamptz_encode
TypeError: expected a datetime.date or datetime.datetime instance, got 'str'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $5: '2025-05-14T20:06:33.050873' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:06:33.050873' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 38, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:06:33.050873' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('86581c1f-969a-425f-aae8-64b78f41d929', '86581c1f-969a-425f-aae8-64b78f41d929', 'WCFG-USD', 'sell', '2025-05-14T20:06:33.050873', Decimal('0.155'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi)
2025-05-14 13:06:33,079 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:06:33.076428' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('86581c1f-969a-425f-aae8-64b78f41d929', '86581c1f-969a-425f-aae8-64b78f41d929', 'WCFG-USD', 'sell', '2025-05-14T20:06:33.076428', Decimal('0.155'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi) (trade_recorder.py:47)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/datetime.pyx", line 208, in asyncpg.pgproto.pgproto.timestamptz_encode
TypeError: expected a datetime.date or datetime.datetime instance, got 'str'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $5: '2025-05-14T20:06:33.076428' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:06:33.076428' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 38, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:06:33.076428' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('86581c1f-969a-425f-aae8-64b78f41d929', '86581c1f-969a-425f-aae8-64b78f41d929', 'WCFG-USD', 'sell', '2025-05-14T20:06:33.076428', Decimal('0.155'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi)
2025-05-14 13:07:11,989 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GNO-USD (ohlcv_manager.py:85)
2025-05-14 13:07:24,850 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:07:36,453 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:08:50,362 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:08:57,499 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:08:57.484345' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'KRL-USD', 'sell', '2025-05-14T20:08:57.484345', Decimal('0.3834'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi) (trade_recorder.py:47)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/datetime.pyx", line 208, in asyncpg.pgproto.pgproto.timestamptz_encode
TypeError: expected a datetime.date or datetime.datetime instance, got 'str'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $5: '2025-05-14T20:08:57.484345' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:08:57.484345' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 38, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:08:57.484345' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'KRL-USD', 'sell', '2025-05-14T20:08:57.484345', Decimal('0.3834'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi)
2025-05-14 13:08:57,524 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:08:57.514261' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'KRL-USD', 'sell', '2025-05-14T20:08:57.514261', Decimal('0.3834'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi) (trade_recorder.py:47)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/datetime.pyx", line 208, in asyncpg.pgproto.pgproto.timestamptz_encode
TypeError: expected a datetime.date or datetime.datetime instance, got 'str'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $5: '2025-05-14T20:08:57.514261' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:08:57.514261' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 38, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:08:57.514261' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'cfe1e533-0a35-4093-ba90-cc6b8a09c084', 'KRL-USD', 'sell', '2025-05-14T20:08:57.514261', Decimal('0.3834'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi)
2025-05-14 13:10:58,689 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:11:04,108 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TNSR-USD (ohlcv_manager.py:85)
2025-05-14 13:11:08,700 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:11:12,244 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TNSR-USD (ohlcv_manager.py:85)
2025-05-14 13:11:17,110 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:12:03,011 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:13:56,903 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:12:08.466855' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('964fff92-471b-4817-820f-8691b16ea127', '964fff92-471b-4817-820f-8691b16ea127', 'WCFG-USD', 'sell', '2025-05-14T20:12:08.466855', Decimal('0.154'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi) (trade_recorder.py:47)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/datetime.pyx", line 208, in asyncpg.pgproto.pgproto.timestamptz_encode
TypeError: expected a datetime.date or datetime.datetime instance, got 'str'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $5: '2025-05-14T20:12:08.466855' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:12:08.466855' (expected a datetime.date or datetime.datetime instance, got 'str')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 38, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: '2025-05-14T20:12:08.466855' (expected a datetime.date or datetime.datetime instance, got 'str')
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('964fff92-471b-4817-820f-8691b16ea127', '964fff92-471b-4817-820f-8691b16ea127', 'WCFG-USD', 'sell', '2025-05-14T20:12:08.466855', Decimal('0.154'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/dbapi)
2025-05-14 13:18:35,747 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:18:35,841 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 13:18:35,841 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 13:18:35,882 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 13:18:35,900 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 13:18:35,900 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:18:35,900 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:18:35,902 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:18:35,912 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 13:18:46,255 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:19:20,293 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(ab5652a9-f778-43db-93db-e2b8fc255653) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('ab5652a9-f778-43db-93db-e2b8fc255653', 'ab5652a9-f778-43db-93db-e2b8fc255653', 'ACS-USD', 'sell', datetime.datetime(2025, 5, 14, 20, 18, 53, 285896), Decimal('0.001445'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj) (trade_recorder.py:53)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(ab5652a9-f778-43db-93db-e2b8fc255653) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(ab5652a9-f778-43db-93db-e2b8fc255653) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 44, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(ab5652a9-f778-43db-93db-e2b8fc255653) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('ab5652a9-f778-43db-93db-e2b8fc255653', 'ab5652a9-f778-43db-93db-e2b8fc255653', 'ACS-USD', 'sell', datetime.datetime(2025, 5, 14, 20, 18, 53, 285896), Decimal('0.001445'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj)
2025-05-14 13:21:22,610 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:21:22,701 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 13:21:22,702 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 13:21:22,738 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 13:21:22,751 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 13:21:22,751 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:21:22,751 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:21:22,753 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 13:21:22,763 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 13:21:34,698 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:21:49,245 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('df24ec4f-bc87-473c-99e9-adcdeca26d79', 'df24ec4f-bc87-473c-99e9-adcdeca26d79', 'ACS-USD', 'sell', datetime.datetime(2025, 5, 14, 20, 21, 37, 248922), Decimal('0.0014416'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj) (trade_recorder.py:55)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 46, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('df24ec4f-bc87-473c-99e9-adcdeca26d79', 'df24ec4f-bc87-473c-99e9-adcdeca26d79', 'ACS-USD', 'sell', datetime.datetime(2025, 5, 14, 20, 21, 37, 248922), Decimal('0.0014416'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj)
2025-05-14 13:28:22,035 - shared_logger - ERROR - ‚ùå Exception in get_fee_rates():  (coinbase_api.py:153)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/client_reqrep.py", line 1059, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/streams.py", line 644, in read
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/coinbase_api.py", line 137, in get_fee_rates
    async with self.session.get(url, headers=headers) as response:
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/client.py", line 690, in _request
    await resp.start(conn)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/client_reqrep.py", line 1054, in start
    with self._timer:
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/helpers.py", line 749, in __exit__
    raise asyncio.TimeoutError from exc_val
asyncio.exceptions.TimeoutError
2025-05-14 13:28:22,072 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:28:56,704 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('df24ec4f-bc87-473c-99e9-adcdeca26d79', 'df24ec4f-bc87-473c-99e9-adcdeca26d79', 'ACS-USD', 'sell', datetime.datetime(2025, 5, 14, 20, 28, 22, 75388), Decimal('0.0014416'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj) (trade_recorder.py:55)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 46, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(df24ec4f-bc87-473c-99e9-adcdeca26d79) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('df24ec4f-bc87-473c-99e9-adcdeca26d79', 'df24ec4f-bc87-473c-99e9-adcdeca26d79', 'ACS-USD', 'sell', datetime.datetime(2025, 5, 14, 20, 28, 22, 75388), Decimal('0.0014416'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj)
2025-05-14 13:29:07,401 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:29:16,335 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for UMA-USD (ohlcv_manager.py:85)
2025-05-14 13:29:16,982 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:29:24,067 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for SNX-USD (ohlcv_manager.py:85)
2025-05-14 13:29:24,384 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for UMA-USD (ohlcv_manager.py:85)
2025-05-14 13:29:29,187 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for SNX-USD (ohlcv_manager.py:85)
2025-05-14 13:29:58,206 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:30:35,894 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:54:23,845 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:54:28,009 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:54:28,357 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:54:28,937 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:55:29,383 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:56:33,932 - shared_logger - ERROR - ‚ùå Exception in get_fee_rates(): Connection timeout to host https://api.coinbase.com/api/v3/brokerage/transaction_summary (coinbase_api.py:153)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/connector.py", line 1109, in _wrap_create_connection
    sock = await aiohappyeyeballs.start_connection(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohappyeyeballs/impl.py", line 89, in start_connection
    sock, _, _ = await _staggered.staggered_race(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohappyeyeballs/_staggered.py", line 160, in staggered_race
    done = await _wait_one(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohappyeyeballs/_staggered.py", line 41, in _wait_one
    return await wait_next
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/client.py", line 663, in _request
    conn = await self._connector.connect(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/connector.py", line 1106, in _wrap_create_connection
    async with ceil_timeout(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/async_timeout/__init__.py", line 179, in __aexit__
    self._do_exit(exc_type)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/async_timeout/__init__.py", line 265, in _do_exit
    raise asyncio.TimeoutError
asyncio.exceptions.TimeoutError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/coinbase_api.py", line 137, in get_fee_rates
    async with self.session.get(url, headers=headers) as response:
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/aiohttp/client.py", line 667, in _request
    raise ConnectionTimeoutError(
aiohttp.client_exceptions.ConnectionTimeoutError: Connection timeout to host https://api.coinbase.com/api/v3/brokerage/transaction_summary
2025-05-14 13:56:42,288 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:56:44,123 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:56:57,269 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:57:08,336 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:57:35,508 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZRX-USD (ohlcv_manager.py:85)
2025-05-14 13:58:08,005 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:58:10,424 - shared_logger - INFO - ‚úÖ Trade recorded successfully: PLU-USD buy @ 0.81 (trade_recorder.py:49)
2025-05-14 13:58:25,494 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZRX-USD (ohlcv_manager.py:85)
2025-05-14 13:58:57,949 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:59:01,154 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:59:03,310 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:59:04,791 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:59:11,602 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:59:12,013 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for STORJ-USD (ohlcv_manager.py:85)
2025-05-14 13:59:14,367 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 13:59:49,420 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 13:59:49,997 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for STORJ-USD (ohlcv_manager.py:85)
2025-05-14 13:59:51,144 - shared_logger - ERROR - ‚ö†Ô∏è [400] Bad Request: {"error":"INVALID_ARGUMENT","error_details":"Orderbook is in limit only mode - attached orders are not allowed","message":"Orderbook is in limit only mode - attached orders are not allowed"} (coinbase_api.py:87)
2025-05-14 14:00:47,730 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:00:49,637 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:00:50,955 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:00:52,411 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:00:56,907 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:01:29,815 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CTX-USD (ohlcv_manager.py:85)
2025-05-14 14:01:32,176 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CTX-USD (ohlcv_manager.py:85)
2025-05-14 14:01:47,022 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BAL-USD (ohlcv_manager.py:85)
2025-05-14 14:01:47,380 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for METIS-USD (ohlcv_manager.py:85)
2025-05-14 14:01:49,732 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:01:50,940 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BAL-USD (ohlcv_manager.py:85)
2025-05-14 14:01:52,173 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for METIS-USD (ohlcv_manager.py:85)
2025-05-14 14:02:08,853 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:02:58,107 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:02:58,152 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:03:08,052 - shared_logger - INFO - ‚úÖ Trade recorded successfully: ERN-USD buy @ 2.1634 (trade_recorder.py:49)
2025-05-14 14:03:32,746 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for INDEX-USD (ohlcv_manager.py:85)
2025-05-14 14:03:33,601 - shared_logger - INFO - ‚úÖ Trade recorded successfully: INDEX-USD buy @ 1.54 (trade_recorder.py:49)
2025-05-14 14:03:39,449 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for INDEX-USD (ohlcv_manager.py:85)
2025-05-14 14:03:40,203 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:03:40,900 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:03:50,240 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:03:51,164 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:04:02,440 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:04:14,192 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:04:18,819 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for SKL-USD (ohlcv_manager.py:85)
2025-05-14 14:04:20,399 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:04:43,562 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for STORJ-USD (ohlcv_manager.py:85)
2025-05-14 14:04:46,098 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for STORJ-USD (ohlcv_manager.py:85)
2025-05-14 14:04:54,639 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MSOL-USD (ohlcv_manager.py:85)
2025-05-14 14:04:58,224 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MSOL-USD (ohlcv_manager.py:85)
2025-05-14 14:05:02,556 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:05:07,694 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLZ-USD (ohlcv_manager.py:85)
2025-05-14 14:05:10,902 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLZ-USD (ohlcv_manager.py:85)
2025-05-14 14:05:37,218 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:05:45,878 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:05:46,774 - shared_logger - INFO - ‚úÖ Trade recorded successfully: ACS-USD buy @ 0.0014420 (trade_recorder.py:49)
2025-05-14 14:06:02,665 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:06:08,865 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BNT-USD (ohlcv_manager.py:85)
2025-05-14 14:06:11,420 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BNT-USD (ohlcv_manager.py:85)
2025-05-14 14:06:42,457 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BADGER-USD (ohlcv_manager.py:85)
2025-05-14 14:06:43,164 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BADGER-USD (ohlcv_manager.py:85)
2025-05-14 14:06:51,831 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BADGER-USD (ohlcv_manager.py:85)
2025-05-14 14:06:57,301 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BADGER-USD (ohlcv_manager.py:85)
2025-05-14 14:07:02,380 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for FIS-USD (ohlcv_manager.py:85)
2025-05-14 14:07:03,030 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:07:03,409 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:07:06,302 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for FIS-USD (ohlcv_manager.py:85)
2025-05-14 14:07:10,647 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:07:35,145 - shared_logger - INFO - ‚úÖ Trade recorded successfully: KRL-USD buy @ 0.4022 (trade_recorder.py:49)
2025-05-14 14:07:55,352 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLUR-USD (ohlcv_manager.py:85)
2025-05-14 14:07:57,899 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:07:58,390 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:08:00,165 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLUR-USD (ohlcv_manager.py:85)
2025-05-14 14:08:04,810 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:08:05,201 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LOKA-USD (ohlcv_manager.py:85)
2025-05-14 14:08:08,492 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:08:08,827 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LOKA-USD (ohlcv_manager.py:85)
2025-05-14 14:08:10,158 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:08:19,244 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:08:20,142 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LQTY-USD (ohlcv_manager.py:85)
2025-05-14 14:08:21,401 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:08:26,682 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LQTY-USD (ohlcv_manager.py:85)
2025-05-14 14:08:41,697 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:08:43,265 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for INV-USD (ohlcv_manager.py:85)
2025-05-14 14:08:46,354 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for INV-USD (ohlcv_manager.py:85)
2025-05-14 14:08:46,765 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CVX-USD (ohlcv_manager.py:85)
2025-05-14 14:08:48,439 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:08:49,630 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLAST-USD (ohlcv_manager.py:85)
2025-05-14 14:08:52,006 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLAST-USD (ohlcv_manager.py:85)
2025-05-14 14:08:57,473 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ARPA-USD (ohlcv_manager.py:85)
2025-05-14 14:09:00,310 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ARPA-USD (ohlcv_manager.py:85)
2025-05-14 14:09:02,124 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZK-USD (ohlcv_manager.py:85)
2025-05-14 14:09:04,786 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZK-USD (ohlcv_manager.py:85)
2025-05-14 14:09:05,164 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:09:07,451 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OGN-USD (ohlcv_manager.py:85)
2025-05-14 14:09:10,009 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OGN-USD (ohlcv_manager.py:85)
2025-05-14 14:10:00,187 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for NMR-USD (ohlcv_manager.py:85)
2025-05-14 14:10:03,154 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:10:04,449 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for NMR-USD (ohlcv_manager.py:85)
2025-05-14 14:10:04,778 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for DEXT-USD (ohlcv_manager.py:85)
2025-05-14 14:10:05,574 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:10:07,289 - shared_logger - INFO - ‚úÖ Trade recorded successfully: DEXT-USD buy @ 0.3011 (trade_recorder.py:49)
2025-05-14 14:10:09,339 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for DEXT-USD (ohlcv_manager.py:85)
2025-05-14 14:10:10,148 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:11:05,682 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:11:18,125 - shared_logger - ERROR - Coinbase cancelOrders() has failed: coinbase cancelOrders() has failed, check your arguments and parameters (api_manager.py:163)
Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/api_manager.py", line 109, in ccxt_api_call
    response = await func(*args, **kwargs) if asyncio.iscoroutinefunction(func) else func(*args, **kwargs)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3185, in cancel_order
    orders = self.cancel_orders([id], symbol, params)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3222, in cancel_orders
    raise BadRequest(self.id + ' cancelOrders() has failed, check your arguments and parameters')
ccxt.base.errors.BadRequest: coinbase cancelOrders() has failed, check your arguments and parameters
2025-05-14 14:11:24,492 - shared_logger - INFO - ‚úÖ Trade recorded successfully: CLV-USD buy @ 0.0294 (trade_recorder.py:49)
2025-05-14 14:11:30,666 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:11:40,202 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:12:02,375 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for C98-USD (ohlcv_manager.py:85)
2025-05-14 14:12:05,784 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:12:07,779 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MASK-USD (ohlcv_manager.py:85)
2025-05-14 14:12:11,131 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MASK-USD (ohlcv_manager.py:85)
2025-05-14 14:12:28,568 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MSOL-USD (ohlcv_manager.py:85)
2025-05-14 14:12:44,019 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for POWR-USD (ohlcv_manager.py:85)
2025-05-14 14:12:46,715 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MSOL-USD (ohlcv_manager.py:85)
2025-05-14 14:12:48,638 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for POWR-USD (ohlcv_manager.py:85)
2025-05-14 14:12:55,707 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for FIS-USD (ohlcv_manager.py:85)
2025-05-14 14:12:57,835 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:13:00,674 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:13:00,996 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for FIS-USD (ohlcv_manager.py:85)
2025-05-14 14:13:03,636 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:13:05,410 - shared_logger - INFO - ‚úÖ Trade recorded successfully: KEYCAT-USD buy @ 0.006087 (trade_recorder.py:49)
2025-05-14 14:13:06,751 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:13:07,069 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for COTI-USD (ohlcv_manager.py:85)
2025-05-14 14:13:08,050 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:13:11,979 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for COTI-USD (ohlcv_manager.py:85)
2025-05-14 14:13:12,953 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:13:16,062 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:13:25,535 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:13:27,420 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:14:00,318 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for AURORA-USD (ohlcv_manager.py:85)
2025-05-14 14:14:00,724 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CTSI-USD (ohlcv_manager.py:85)
2025-05-14 14:14:02,893 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for AURORA-USD (ohlcv_manager.py:85)
2025-05-14 14:14:08,583 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:14:19,179 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:14:25,053 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:15:09,207 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:15:34,201 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:15:38,365 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:15:47,946 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for FOX-USD (ohlcv_manager.py:85)
2025-05-14 14:15:54,576 - shared_logger - INFO - ‚úÖ Trade recorded successfully: SHDW-USD buy @ 0.144 (trade_recorder.py:49)
2025-05-14 14:16:03,313 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 14:16:05,912 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 14:16:09,383 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:16:10,164 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RAD-USD (ohlcv_manager.py:85)
2025-05-14 14:16:15,376 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RAD-USD (ohlcv_manager.py:85)
2025-05-14 14:16:25,449 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for DEXT-USD (ohlcv_manager.py:85)
2025-05-14 14:16:29,518 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for DEXT-USD (ohlcv_manager.py:85)
2025-05-14 14:16:32,071 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GHST-USD (ohlcv_manager.py:85)
2025-05-14 14:16:35,355 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GHST-USD (ohlcv_manager.py:85)
2025-05-14 14:16:58,807 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:17:01,634 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LPT-USD (ohlcv_manager.py:85)
2025-05-14 14:17:05,543 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 14:17:07,785 - shared_logger - INFO - ‚úÖ Trade recorded successfully: ACS-USD buy @ 0.0014404 (trade_recorder.py:49)
2025-05-14 14:17:10,553 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 14:17:22,677 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GHST-USD (ohlcv_manager.py:85)
2025-05-14 14:17:28,088 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GHST-USD (ohlcv_manager.py:85)
2025-05-14 16:39:44,103 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 16:39:44,200 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 16:39:44,200 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 16:39:44,239 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 16:39:44,249 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 16:39:44,249 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 16:39:44,250 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 16:39:44,252 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 16:39:44,262 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 16:39:54,824 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 16:40:21,605 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:40:27,319 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:40:29,579 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ALCX-USD (ohlcv_manager.py:85)
2025-05-14 16:40:35,058 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ALCX-USD (ohlcv_manager.py:85)
2025-05-14 16:41:02,067 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 16:41:04,149 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ALEPH-USD (ohlcv_manager.py:85)
2025-05-14 16:41:07,261 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:41:08,271 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:41:08,599 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ALEPH-USD (ohlcv_manager.py:85)
2025-05-14 16:41:16,860 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:41:19,101 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:41:26,340 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CTX-USD (ohlcv_manager.py:85)
2025-05-14 16:41:26,864 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:41:28,316 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:41:28,998 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CTX-USD (ohlcv_manager.py:85)
2025-05-14 16:41:34,719 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MSOL-USD (ohlcv_manager.py:85)
2025-05-14 16:41:37,928 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MSOL-USD (ohlcv_manager.py:85)
2025-05-14 16:41:53,378 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BADGER-USD (ohlcv_manager.py:85)
2025-05-14 16:41:54,033 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 16:41:55,952 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BADGER-USD (ohlcv_manager.py:85)
2025-05-14 16:41:58,460 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TRAC-USD (ohlcv_manager.py:85)
2025-05-14 16:42:00,971 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TRAC-USD (ohlcv_manager.py:85)
2025-05-14 16:42:03,937 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for IDEX-USD (ohlcv_manager.py:85)
2025-05-14 16:42:04,385 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 16:42:04,620 - shared_logger - INFO - ‚úÖ Trade recorded successfully: IDEX-USD buy @ 0.0275 (trade_recorder.py:49)
2025-05-14 16:42:06,313 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for IDEX-USD (ohlcv_manager.py:85)
2025-05-14 16:42:08,853 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CHZ-USD (ohlcv_manager.py:85)
2025-05-14 16:42:11,251 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CHZ-USD (ohlcv_manager.py:85)
2025-05-14 16:42:25,590 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for 1INCH-USD (ohlcv_manager.py:85)
2025-05-14 16:42:27,958 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for 1INCH-USD (ohlcv_manager.py:85)
2025-05-14 16:42:48,892 - shared_logger - ERROR - ‚ö†Ô∏è [400] Bad Request: {"error":"INVALID_ARGUMENT","error_details":"Orderbook is in limit only mode - attached orders are not allowed","message":"Orderbook is in limit only mode - attached orders are not allowed"} (coinbase_api.py:87)
2025-05-14 16:43:43,912 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 16:53:01,390 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(9407e11d-1991-4cd6-bedd-2aed396c07c5) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('9407e11d-1991-4cd6-bedd-2aed396c07c5', '9407e11d-1991-4cd6-bedd-2aed396c07c5', 'PNG-USD', 'sell', datetime.datetime(2025, 5, 14, 23, 43, 1, 368716), Decimal('0.18479'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj) (trade_recorder.py:55)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(9407e11d-1991-4cd6-bedd-2aed396c07c5) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(9407e11d-1991-4cd6-bedd-2aed396c07c5) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 46, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(9407e11d-1991-4cd6-bedd-2aed396c07c5) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('9407e11d-1991-4cd6-bedd-2aed396c07c5', '9407e11d-1991-4cd6-bedd-2aed396c07c5', 'PNG-USD', 'sell', datetime.datetime(2025, 5, 14, 23, 43, 1, 368716), Decimal('0.18479'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj)
2025-05-14 17:04:12,038 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:04:12,140 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 17:04:12,140 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 17:04:12,183 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 17:04:12,200 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 17:04:12,200 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:04:12,200 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:08:22,859 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:08:22,944 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 17:08:22,944 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 17:08:22,976 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 17:08:22,985 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 17:08:22,985 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:08:22,985 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:10:41,839 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:10:41,938 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 17:10:41,938 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 17:10:41,983 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 17:10:42,001 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 17:10:42,001 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:10:42,002 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:10:46,228 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 17:10:46,246 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 17:11:08,984 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 17:11:28,787 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(4486a5ab-f870-42a5-b498-73a1ad74096f) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('4486a5ab-f870-42a5-b498-73a1ad74096f', '4486a5ab-f870-42a5-b498-73a1ad74096f', 'DNT-USD', 'sell', datetime.datetime(2025, 5, 15, 0, 11, 15, 227125), Decimal('0.0323'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj) (trade_recorder.py:55)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(4486a5ab-f870-42a5-b498-73a1ad74096f) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(4486a5ab-f870-42a5-b498-73a1ad74096f) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 46, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(4486a5ab-f870-42a5-b498-73a1ad74096f) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('4486a5ab-f870-42a5-b498-73a1ad74096f', '4486a5ab-f870-42a5-b498-73a1ad74096f', 'DNT-USD', 'sell', datetime.datetime(2025, 5, 15, 0, 11, 15, 227125), Decimal('0.0323'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj)
2025-05-14 19:24:19,491 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:24:19,591 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 19:24:19,591 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 19:24:19,641 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 19:24:19,660 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 19:24:19,660 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:24:19,661 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:24:19,663 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:24:19,677 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 19:24:32,462 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:24:55,785 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:25:03,509 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:25:07,158 - shared_logger - ERROR - ‚ùå adjust_price_and_size: Error - [<class 'decimal.InvalidOperation'>] (precision.py:186)
Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Shared_Utils/precision.py", line 155, in adjust_price_and_size
    adjusted_price = net_proceeds.quantize(precision, rounding=ROUND_DOWN)
decimal.InvalidOperation: [<class 'decimal.InvalidOperation'>]
2025-05-14 19:25:07,159 - shared_logger - ERROR - ‚ùå adjust_precision: An error occurred: Unsupported input type for num_to_adjust: <class 'NoneType'> (precision.py:223)
Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Shared_Utils/precision.py", line 220, in adjust_precision
    raise TypeError(f"Unsupported input type for num_to_adjust: {type(num_to_adjust)}")
TypeError: Unsupported input type for num_to_adjust: <class 'NoneType'>
2025-05-14 19:25:42,549 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:25:42,991 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CVX-USD (ohlcv_manager.py:85)
2025-05-14 19:25:48,697 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CVX-USD (ohlcv_manager.py:85)
2025-05-14 19:25:49,578 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:25:50,522 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:26:15,116 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:26:29,297 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:26:36,789 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:26:39,753 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:26:44,868 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:26:49,103 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:26:54,187 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:27:04,130 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LOKA-USD (ohlcv_manager.py:85)
2025-05-14 19:27:06,490 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LOKA-USD (ohlcv_manager.py:85)
2025-05-14 19:27:45,172 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MASK-USD (ohlcv_manager.py:85)
2025-05-14 19:27:45,395 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:27:47,708 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MASK-USD (ohlcv_manager.py:85)
2025-05-14 19:27:50,097 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TRAC-USD (ohlcv_manager.py:85)
2025-05-14 19:27:52,459 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TRAC-USD (ohlcv_manager.py:85)
2025-05-14 19:27:57,982 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GTC-USD (ohlcv_manager.py:85)
2025-05-14 19:28:09,227 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(adb05160-4e95-4385-850b-d16c9b937216) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('adb05160-4e95-4385-850b-d16c9b937216', 'adb05160-4e95-4385-850b-d16c9b937216', 'PNG-USD', 'sell', datetime.datetime(2025, 5, 15, 2, 27, 59, 800215), Decimal('0.17894'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj) (trade_recorder.py:55)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(adb05160-4e95-4385-850b-d16c9b937216) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(adb05160-4e95-4385-850b-d16c9b937216) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 46, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(adb05160-4e95-4385-850b-d16c9b937216) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('adb05160-4e95-4385-850b-d16c9b937216', 'adb05160-4e95-4385-850b-d16c9b937216', 'PNG-USD', 'sell', datetime.datetime(2025, 5, 15, 2, 27, 59, 800215), Decimal('0.17894'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj)
2025-05-14 19:46:53,019 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:46:53,120 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 19:46:53,120 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 19:46:53,162 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 19:46:53,179 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 19:46:53,179 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:46:53,179 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:46:53,181 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:46:53,191 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 19:47:03,303 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:47:32,543 - shared_logger - ERROR - Coinbase cancelOrders() has failed: coinbase cancelOrders() has failed, check your arguments and parameters (api_manager.py:163)
Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/api_manager.py", line 109, in ccxt_api_call
    response = await func(*args, **kwargs) if asyncio.iscoroutinefunction(func) else func(*args, **kwargs)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3185, in cancel_order
    orders = self.cancel_orders([id], symbol, params)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3222, in cancel_orders
    raise BadRequest(self.id + ' cancelOrders() has failed, check your arguments and parameters')
ccxt.base.errors.BadRequest: coinbase cancelOrders() has failed, check your arguments and parameters
2025-05-14 19:48:08,586 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:48:08,687 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 19:48:08,687 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 19:48:08,734 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 19:48:08,750 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 19:48:08,751 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:48:08,751 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:48:08,753 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 19:48:08,765 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 19:48:19,220 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:48:28,718 - shared_logger - ERROR - Coinbase cancelOrders() has failed: coinbase cancelOrders() has failed, check your arguments and parameters (api_manager.py:163)
Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/api_manager.py", line 109, in ccxt_api_call
    response = await func(*args, **kwargs) if asyncio.iscoroutinefunction(func) else func(*args, **kwargs)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3185, in cancel_order
    orders = self.cancel_orders([id], symbol, params)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3222, in cancel_orders
    raise BadRequest(self.id + ' cancelOrders() has failed, check your arguments and parameters')
ccxt.base.errors.BadRequest: coinbase cancelOrders() has failed, check your arguments and parameters
2025-05-14 19:48:29,064 - shared_logger - ERROR - Coinbase cancelOrders() has failed: coinbase cancelOrders() has failed, check your arguments and parameters (api_manager.py:163)
Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/api_manager.py", line 109, in ccxt_api_call
    response = await func(*args, **kwargs) if asyncio.iscoroutinefunction(func) else func(*args, **kwargs)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3185, in cancel_order
    orders = self.cancel_orders([id], symbol, params)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3222, in cancel_orders
    raise BadRequest(self.id + ' cancelOrders() has failed, check your arguments and parameters')
ccxt.base.errors.BadRequest: coinbase cancelOrders() has failed, check your arguments and parameters
2025-05-14 19:48:29,377 - shared_logger - ERROR - Coinbase cancelOrders() has failed: coinbase cancelOrders() has failed, check your arguments and parameters (api_manager.py:163)
Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/api_manager.py", line 109, in ccxt_api_call
    response = await func(*args, **kwargs) if asyncio.iscoroutinefunction(func) else func(*args, **kwargs)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3185, in cancel_order
    orders = self.cancel_orders([id], symbol, params)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3222, in cancel_orders
    raise BadRequest(self.id + ' cancelOrders() has failed, check your arguments and parameters')
ccxt.base.errors.BadRequest: coinbase cancelOrders() has failed, check your arguments and parameters
2025-05-14 19:48:42,047 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:48:50,188 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:48:51,082 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RPL-USD (ohlcv_manager.py:85)
2025-05-14 19:48:54,440 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RPL-USD (ohlcv_manager.py:85)
2025-05-14 19:49:03,366 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LPT-USD (ohlcv_manager.py:85)
2025-05-14 19:49:05,865 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LPT-USD (ohlcv_manager.py:85)
2025-05-14 19:49:35,808 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:49:37,751 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLUR-USD (ohlcv_manager.py:85)
2025-05-14 19:49:39,532 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:49:39,871 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:49:40,223 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BLUR-USD (ohlcv_manager.py:85)
2025-05-14 19:49:52,417 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:49:52,777 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:49:56,653 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 19:50:00,525 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 19:50:02,670 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:50:04,258 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 19:51:53,457 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 19:53:57,129 - shared_logger - ERROR - ‚ùå Error recording trade: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(96d6c93f-1ef6-4e6f-ac6f-9e447727921c) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('96d6c93f-1ef6-4e6f-ac6f-9e447727921c', '96d6c93f-1ef6-4e6f-ac6f-9e447727921c', 'HOPR-USD', 'sell', datetime.datetime(2025, 5, 15, 2, 50, 13, 883039), Decimal('0.0483'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj) (trade_recorder.py:55)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(96d6c93f-1ef6-4e6f-ac6f-9e447727921c) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(96d6c93f-1ef6-4e6f-ac6f-9e447727921c) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/SharedDataManager/trade_recorder.py", line 46, in record_trade
    await session.commit()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 585, in commit
    return await greenlet_spawn(self.sync_session.commit)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 129, in greenlet_spawn
    result = context.switch(value)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1454, in commit
    self._transaction.commit(_to_root=self.future)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 832, in commit
    self._prepare_impl()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 811, in _prepare_impl
    self.session.flush()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3449, in flush
    self._flush(objects)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3588, in _flush
    with util.safe_reraise():
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 3549, in _flush
    flush_context.execute()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 245, in save_obj
    _emit_insert_statements(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1097, in _emit_insert_statements
    c = connection._execute_20(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
    ret = self._execute_context(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1953, in _execute_context
    self._handle_dbapi_exception(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2134, in _handle_dbapi_exception
    util.raise_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/compat.py", line 211, in raise_
    raise exception
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1910, in _execute_context
    self.dialect.do_execute(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 70, in await_only
    return current.parent.switch(awaitable)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 122, in greenlet_spawn
    value = await result
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "trade_records_pkey"
DETAIL:  Key (order_id)=(96d6c93f-1ef6-4e6f-ac6f-9e447727921c) already exists.
[SQL: INSERT INTO trade_records (order_id, parent_id, symbol, side, order_time, price, size, pnl_usd, total_fees_usd, trigger, status) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('96d6c93f-1ef6-4e6f-ac6f-9e447727921c', '96d6c93f-1ef6-4e6f-ac6f-9e447727921c', 'HOPR-USD', 'sell', datetime.datetime(2025, 5, 15, 2, 50, 13, 883039), Decimal('0.0483'), Decimal('0'), None, None, 'sl', 'cancelled')]
(Background on this error at: https://sqlalche.me/e/14/gkpj)
2025-05-14 20:12:26,175 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:12:26,267 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 20:12:26,267 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 20:12:26,302 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 20:12:26,313 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 20:12:26,313 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:12:26,313 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:12:26,315 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:12:26,326 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 20:12:37,576 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 20:12:53,712 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:00,327 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:20,809 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:21,859 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:23,025 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TNSR-USD (ohlcv_manager.py:85)
2025-05-14 20:13:26,845 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TNSR-USD (ohlcv_manager.py:85)
2025-05-14 20:13:29,442 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:29,810 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OGN-USD (ohlcv_manager.py:85)
2025-05-14 20:13:30,270 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:32,328 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OGN-USD (ohlcv_manager.py:85)
2025-05-14 20:13:39,079 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:39,431 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:13:43,858 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 20:13:48,016 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CLANKER-USD (ohlcv_manager.py:85)
2025-05-14 20:13:50,565 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CLANKER-USD (ohlcv_manager.py:85)
2025-05-14 20:14:16,894 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:14:22,085 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:14:23,279 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 20:14:25,845 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 20:14:38,710 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CORECHAIN-USD (ohlcv_manager.py:85)
2025-05-14 20:14:41,254 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CORECHAIN-USD (ohlcv_manager.py:85)
2025-05-14 20:14:43,986 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 20:14:54,034 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for POND-USD (ohlcv_manager.py:85)
2025-05-14 20:14:56,563 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for POND-USD (ohlcv_manager.py:85)
2025-05-14 20:15:09,330 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for COW-USD (ohlcv_manager.py:85)
2025-05-14 20:15:11,845 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for COW-USD (ohlcv_manager.py:85)
2025-05-14 20:15:19,481 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ALT-USD (ohlcv_manager.py:85)
2025-05-14 20:15:22,167 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ALT-USD (ohlcv_manager.py:85)
2025-05-14 20:15:28,185 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BNT-USD (ohlcv_manager.py:85)
2025-05-14 20:15:33,122 - shared_logger - INFO - üóëÔ∏è Deleted trade record for order_id 49a2b9b2-f640-4fdf-8384-5896c22881a9 (trade_recorder.py:88)
2025-05-14 20:15:41,395 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BNT-USD (ohlcv_manager.py:85)
2025-05-14 20:15:41,815 - shared_logger - WARNING - ‚ö†Ô∏è Tried to delete trade 49a2b9b2-f640-4fdf-8384-5896c22881a9, but it was not found. (trade_recorder.py:91)
2025-05-14 20:15:44,230 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 20:16:46,608 - shared_logger - INFO - üóëÔ∏è Deleted trade record for order_id 33cfd8e9-b774-4a98-adfc-1c743d0f93cd (trade_recorder.py:88)
2025-05-14 20:18:42,399 - shared_logger - WARNING - ‚ö†Ô∏è Tried to delete trade 33cfd8e9-b774-4a98-adfc-1c743d0f93cd, but it was not found. (trade_recorder.py:91)
2025-05-14 20:18:56,966 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:19:02,300 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:19:12,895 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BNT-USD (ohlcv_manager.py:85)
2025-05-14 20:19:15,247 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for BNT-USD (ohlcv_manager.py:85)
2025-05-14 20:19:20,148 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LSETH-USD (ohlcv_manager.py:85)
2025-05-14 20:19:23,532 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LSETH-USD (ohlcv_manager.py:85)
2025-05-14 20:19:39,230 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:19:40,204 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:19:42,475 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 20:19:47,665 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:19:48,304 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:20:00,622 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:20:01,391 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:20:20,788 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:20:26,205 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:20:26,571 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CTX-USD (ohlcv_manager.py:85)
2025-05-14 20:20:27,670 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for UMA-USD (ohlcv_manager.py:85)
2025-05-14 20:20:29,532 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CTX-USD (ohlcv_manager.py:85)
2025-05-14 20:20:45,882 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 20:20:45,891 - shared_logger - INFO - ‚úÖ Trade recorded successfully: MUSE-USD buy @ 8.865 (trade_recorder.py:49)
2025-05-14 20:20:46,408 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 20:20:48,820 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 20:20:54,685 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MASK-USD (ohlcv_manager.py:85)
2025-05-14 20:20:57,331 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MASK-USD (ohlcv_manager.py:85)
2025-05-14 20:21:07,326 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 20:21:10,116 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 20:21:14,478 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PNG-USD (ohlcv_manager.py:85)
2025-05-14 20:21:18,864 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PNG-USD (ohlcv_manager.py:85)
2025-05-14 20:21:42,992 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:21:43,962 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LOKA-USD (ohlcv_manager.py:85)
2025-05-14 20:21:47,172 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for LOKA-USD (ohlcv_manager.py:85)
2025-05-14 20:21:47,225 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 20:21:48,296 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RED-USD (ohlcv_manager.py:85)
2025-05-14 20:21:48,963 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 20:21:50,807 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RED-USD (ohlcv_manager.py:85)
2025-05-14 20:21:53,761 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for INDEX-USD (ohlcv_manager.py:85)
2025-05-14 20:22:01,728 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for METIS-USD (ohlcv_manager.py:85)
2025-05-14 20:22:04,084 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for METIS-USD (ohlcv_manager.py:85)
2025-05-14 20:22:26,738 - shared_logger - ERROR - ‚ö†Ô∏è Post-only limit buys must be priced below the lowest sell price({'trading_pair': 'MUSE/USD', 'time_order_placed': datetime.datetime(2025, 5, 14, 20, 20, 40, 9102), 'type': 'limit', 'order_id': 'ed14044d-2578-4258-b8aa-a3b49ef17a3d', 'side': 'buy', 'order_amount': Decimal('49.420'), 'filled_price': Decimal('0'), 'base_currency': 'MUSE', 'quote_currency': 'USD', 'usd_avail_balance': Decimal('49.420'), 'usd_balance': Decimal('138.380'), 'base_avail_balance': Decimal('0.000'), 'total_balance_crypto': Decimal('0.000'), 'available_to_trade_crypto': Decimal('0.000'), 'base_decimal': 3, 'quote_decimal': 3, 'quote_increment': Decimal('0.001'), 'highest_bid': Decimal('8.865'), 'lowest_ask': Decimal('8.929'), 'maker': Decimal('0.0015'), 'taker': Decimal('0.0025'), 'spread': Decimal('0.064'), 'open_orders': Empty DataFrame
Columns: []
Index: [], 'status': 'VALID', 'source': 'webhook', 'trigger': 'passive_buy@8.836', 'price': Decimal('0'), 'cost_basis': Decimal('0'), 'limit_price': Decimal('0'), 'average_price': None, 'adjusted_price': Decimal('8.865'), 'adjusted_size': Decimal('5.544'), 'stop_loss_price': Decimal('8.776'), 'take_profit_price': Decimal('9.109'), 'volume_24h': None, 'parent_order_id': 'ed14044d-2578-4258-b8aa-a3b49ef17a3d'},) (api_manager.py:166)
2025-05-14 20:22:26,740 - shared_logger - ERROR - Exchange error cancel_order : coinbase {"error":"unknown","error_details":"proto:¬†(line 1:15): invalid value for string field orderIds: {","message":"proto:¬†(line 1:15): invalid value for string field orderIds: {"} (api_manager.py:168)
Traceback (most recent call last):
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/base/exchange.py", line 577, in fetch
    response.raise_for_status()
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.coinbase.com/api/v3/brokerage/orders/batch_cancel

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/jack/Python_Projects/BotTrader/Api_manager/api_manager.py", line 109, in ccxt_api_call
    response = await func(*args, **kwargs) if asyncio.iscoroutinefunction(func) else func(*args, **kwargs)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3185, in cancel_order
    orders = self.cancel_orders([id], symbol, params)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 3206, in cancel_orders
    response = self.v3PrivatePostBrokerageOrdersBatchCancel(self.extend(request, params))
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/base/types.py", line 35, in unbound_method
    return _self.request(self.path, self.api, self.method, params, config=self.config)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/base/exchange.py", line 4395, in request
    return self.fetch2(path, api, method, params, headers, body, config)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/base/exchange.py", line 4391, in fetch2
    raise e
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/base/exchange.py", line 4380, in fetch2
    return self.fetch(request['url'], request['method'], request['headers'], request['body'])
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/base/exchange.py", line 593, in fetch
    skip_further_error_handling = self.handle_errors(http_status_code, http_status_text, url, method, headers, http_response, json_response, request_headers, request_body)
  File "/opt/anaconda3/envs/TradeBot/lib/python3.10/site-packages/ccxt/coinbase.py", line 4892, in handle_errors
    raise ExchangeError(feedback)
ccxt.base.errors.ExchangeError: coinbase {"error":"unknown","error_details":"proto:¬†(line 1:15): invalid value for string field orderIds: {","message":"proto:¬†(line 1:15): invalid value for string field orderIds: {"}
2025-05-14 20:22:26,746 - shared_logger - INFO - API call failed after all retries. cancel_order (api_manager.py:181)
NoneType: None
2025-05-14 20:29:53,679 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:29:53,789 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 20:29:53,789 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 20:29:53,828 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 20:29:53,842 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 20:29:53,843 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:29:53,843 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:29:53,845 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:29:53,854 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 20:31:55,096 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:31:55,208 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 20:31:55,209 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 20:31:55,248 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 20:31:55,259 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 20:31:55,259 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:31:55,259 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:31:55,261 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:31:55,271 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 20:32:54,092 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:32:54,204 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 20:32:54,204 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 20:32:54,243 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 20:32:54,253 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 20:32:54,253 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:32:54,253 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:32:54,255 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:32:54,264 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 20:34:37,206 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:34:37,312 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 20:34:37,313 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 20:34:37,352 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 20:34:37,369 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 20:34:37,369 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:34:37,369 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:34:37,372 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:34:37,383 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 20:35:18,347 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:35:18,438 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 20:35:18,438 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 20:35:18,481 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 20:35:18,496 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 20:35:18,496 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:35:18,497 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:35:18,499 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 20:35:18,509 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:02:33,459 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:02:33,555 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:02:33,555 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:02:33,597 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:02:33,613 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:02:33,613 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:02:33,613 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:02:33,615 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:02:33,627 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:04:33,553 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:04:33,663 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:04:33,664 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:04:33,704 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:04:33,715 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:04:33,716 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:04:33,716 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:04:33,718 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:04:33,729 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:06:21,885 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:06:21,993 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:06:21,993 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:06:22,033 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:06:22,044 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:06:22,044 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:06:22,044 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:06:22,047 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:06:22,057 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:08:11,090 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:08:11,191 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:08:11,191 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:08:11,229 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:08:11,240 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:08:11,240 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:08:11,240 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:09:28,028 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:09:28,224 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:11:34,515 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:11:34,623 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:11:34,623 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:11:34,671 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:11:34,690 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:11:34,690 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:11:34,691 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:11:44,931 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:11:44,949 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:13:07,403 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:13:07,501 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:13:07,501 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:13:07,539 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:13:07,554 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:13:07,554 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:13:07,554 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:13:17,804 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:13:17,822 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:20:54,503 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:20:54,598 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:20:54,598 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:20:54,635 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:20:54,649 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:20:54,649 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:20:54,649 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:20:59,540 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:20:59,554 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:22:12,792 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:22:12,898 - shared_logger - INFO - Database connected successfully. (database_session_manager.py:102)
2025-05-14 21:22:12,898 - shared_logger - INFO - DatabaseSessionManager initialized and connected to the database. (database_session_manager.py:112)
2025-05-14 21:22:12,943 - shared_logger - INFO - ‚úÖ Database schema initialized (tables created if they didn't exist). (database_session_manager.py:60)
2025-05-14 21:22:12,961 - shared_logger - INFO - üîπ CoinBaseAPI  initialzed debug. (coinbase_api.py:30)
2025-05-14 21:22:12,961 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:22:12,961 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:22:12,964 - shared_logger - INFO - üî∏Email alerts are DISABLED via EMAIL_ALERTS=False. (alert_system.py:31)
2025-05-14 21:22:12,975 - shared_logger - INFO - ‚úÖ Startup snapshot loaded from database. (shared_data_manager.py:135)
2025-05-14 21:22:32,483 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:22:51,056 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:22:56,883 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:23:22,832 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 21:23:24,255 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:23:24,619 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:23:25,338 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 21:23:33,544 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:23:33,893 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:23:36,965 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:23:41,759 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:23:42,104 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:23:50,910 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for FARM-USD (ohlcv_manager.py:85)
2025-05-14 21:23:53,274 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for FARM-USD (ohlcv_manager.py:85)
2025-05-14 21:24:07,383 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:24:12,852 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:24:37,410 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:24:42,047 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZEN-USD (ohlcv_manager.py:85)
2025-05-14 21:24:44,561 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZEN-USD (ohlcv_manager.py:85)
2025-05-14 21:25:17,336 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZK-USD (ohlcv_manager.py:85)
2025-05-14 21:25:20,573 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for ZK-USD (ohlcv_manager.py:85)
2025-05-14 21:25:26,153 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:25:35,030 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:25:37,544 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:25:39,714 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for VARA-USD (ohlcv_manager.py:85)
2025-05-14 21:25:42,106 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for VARA-USD (ohlcv_manager.py:85)
2025-05-14 21:25:44,610 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MNDE-USD (ohlcv_manager.py:85)
2025-05-14 21:25:47,114 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MNDE-USD (ohlcv_manager.py:85)
2025-05-14 21:25:49,657 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RARI-USD (ohlcv_manager.py:85)
2025-05-14 21:25:52,379 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RARI-USD (ohlcv_manager.py:85)
2025-05-14 21:25:54,753 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for NMR-USD (ohlcv_manager.py:85)
2025-05-14 21:25:57,284 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for NMR-USD (ohlcv_manager.py:85)
2025-05-14 21:26:19,683 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PLU-USD (ohlcv_manager.py:85)
2025-05-14 21:26:22,059 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PLU-USD (ohlcv_manager.py:85)
2025-05-14 21:26:37,913 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:26:44,263 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:26:48,902 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:27:00,009 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CVX-USD (ohlcv_manager.py:85)
2025-05-14 21:27:02,545 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CVX-USD (ohlcv_manager.py:85)
2025-05-14 21:27:09,826 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TNSR-USD (ohlcv_manager.py:85)
2025-05-14 21:27:12,318 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for TNSR-USD (ohlcv_manager.py:85)
2025-05-14 21:27:24,422 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for HOPR-USD (ohlcv_manager.py:85)
2025-05-14 21:27:26,928 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for HOPR-USD (ohlcv_manager.py:85)
2025-05-14 21:27:42,078 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:28:01,706 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:28:08,784 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:28:11,867 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 21:28:14,235 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PYR-USD (ohlcv_manager.py:85)
2025-05-14 21:28:32,083 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:28:37,592 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:28:42,102 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:28:43,613 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:28:45,809 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:28:51,164 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:28:54,836 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:29:07,530 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PUNDIX-USD (ohlcv_manager.py:85)
2025-05-14 21:29:13,203 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for PUNDIX-USD (ohlcv_manager.py:85)
2025-05-14 21:29:20,216 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:29:25,195 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:29:37,881 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OCEAN-USD (ohlcv_manager.py:85)
2025-05-14 21:29:40,458 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OCEAN-USD (ohlcv_manager.py:85)
2025-05-14 21:29:44,106 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:29:48,018 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GNO-USD (ohlcv_manager.py:85)
2025-05-14 21:29:50,545 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for AURORA-USD (ohlcv_manager.py:85)
2025-05-14 21:29:55,068 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for AURORA-USD (ohlcv_manager.py:85)
2025-05-14 21:29:56,244 - shared_logger - WARNING - ‚ö†Ô∏è Tried to delete trade 71a5cf08-ccef-4dee-803d-fc741e90a20b, but it was not found. (trade_recorder.py:91)
2025-05-14 21:29:56,260 - shared_logger - WARNING - ‚ö†Ô∏è Tried to delete trade 71a5cf08-ccef-4dee-803d-fc741e90a20b, but it was not found. (trade_recorder.py:91)
2025-05-14 21:30:02,621 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OXT-USD (ohlcv_manager.py:85)
2025-05-14 21:30:06,170 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for OXT-USD (ohlcv_manager.py:85)
2025-05-14 21:30:08,694 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MDT-USD (ohlcv_manager.py:85)
2025-05-14 21:30:11,261 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MDT-USD (ohlcv_manager.py:85)
2025-05-14 21:30:14,812 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for KNC-USD (ohlcv_manager.py:85)
2025-05-14 21:30:17,323 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for KNC-USD (ohlcv_manager.py:85)
2025-05-14 21:30:19,744 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GHST-USD (ohlcv_manager.py:85)
2025-05-14 21:30:22,359 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for GHST-USD (ohlcv_manager.py:85)
2025-05-14 21:30:35,692 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:30:39,562 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for YFI-USD (ohlcv_manager.py:85)
2025-05-14 21:30:40,946 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:30:44,215 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:31:29,108 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CLANKER-USD (ohlcv_manager.py:85)
2025-05-14 21:31:31,479 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for CLANKER-USD (ohlcv_manager.py:85)
2025-05-14 21:31:33,856 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for SD-USD (ohlcv_manager.py:85)
2025-05-14 21:31:36,418 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for SD-USD (ohlcv_manager.py:85)
2025-05-14 21:31:38,311 - shared_logger - INFO - ‚úÖ Trade recorded successfully: RARI-USD buy @ 1.31 (trade_recorder.py:49)
2025-05-14 21:31:39,072 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RARI-USD (ohlcv_manager.py:85)
2025-05-14 21:31:45,408 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for RARI-USD (ohlcv_manager.py:85)
2025-05-14 21:31:45,453 - shared_logger - INFO - Starting to save shared data... (shared_data_manager.py:275)
2025-05-14 21:31:46,591 - shared_logger - INFO - üóëÔ∏è Deleted trade record for order_id bf277296-de4d-4cc7-9db7-bd9564c49ef3 (trade_recorder.py:88)
2025-05-14 21:31:46,599 - shared_logger - WARNING - ‚ö†Ô∏è Tried to delete trade bf277296-de4d-4cc7-9db7-bd9564c49ef3, but it was not found. (trade_recorder.py:91)
2025-05-14 21:31:56,432 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 21:31:58,837 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:32:00,638 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for MUSE-USD (ohlcv_manager.py:85)
2025-05-14 21:32:04,147 - shared_logger - INFO - Insufficient balance for create_order. Cannot place order. (api_manager.py:154)
2025-05-14 21:32:46,686 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for G-USD (ohlcv_manager.py:85)
2025-05-14 21:32:49,264 - shared_logger - WARNING - ‚ö†Ô∏è No new OHLCV data for G-USD (ohlcv_manager.py:85)
